:imagesdir: ../assets/images
= The Basics
:experimental:

In this step, you will create a straightforward application serving a `hello` endpoint. To demonstrate dependency injection this endpoint uses a `greeting` bean.

image::arch.png[arch,800]

== Explore the IDE

This workshop's IDE is based on Eclipse Che (which is in turn based on MicroSoft VS Code editor).

. Explore the icons on the left for navigating between project explorer, search, version control (e.g. Git), debugging, and other plugins.  You'll use these during the course of this workshop. Feel free to select them and see what they do:
+
image::ds-icons.png[cdw, 500]
+
TIP:  If things get weird or your browser appears, you can simply reload the browser tab to refresh the view.


. Many features of VS Code are accessed via *Command Palette*. You can see a few of the tutorials on the *Get Started* page (e.g. _Login/Provision OpenShift Cluster_, _Create Component from Devfile registries webview_, and others).

TIP: If you ever need to run commands that you don't see in a menu, you can press kbd:[F1] to open the command window, or the more traditional kbd:[Control+SHIFT+P] (or kbd:[Command+SHIFT+P] on macOS).

== Explore the Project

Let's take a look at the *Explorer* menu on the left hand of the IDE. Your Quarkus project was already imported when the workspace was created. 

. Open the `pom.xml` in the project root directory. Note the version of the Red Hat Build of Quarkus you will use for the workshop today.
+
[source, xml]
----
    <properties>
        <compiler-plugin.version>3.14.0</compiler-plugin.version>
        <maven.compiler.release>21</maven.compiler.release>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
        <quarkus.platform.artifact-id>quarkus-bom</quarkus.platform.artifact-id>
        <quarkus.platform.group-id>com.redhat.quarkus.platform</quarkus.platform.group-id>
        <quarkus.platform.version>3.20.1.redhat-00003</quarkus.platform.version>
        <skipITs>true</skipITs>
        <surefire-plugin.version>3.5.2</surefire-plugin.version>
    </properties>
----

. The project also contains:

* The Maven structure
* An `org.acme.people.rest.GreetingResource` resource exposed on `/hello`, along with a simple test
* A landing page that is accessible on `http://localhost:8080` after starting the application
* The application configuration file
* Other source files we'll use later

. Navigate to `src -> main -> java -> org.acme.people.rest` in the project tree and select `GreetingResource.java`.
+
image::initnav.png[VS Code-workspace-terminal, 800]

. This class has a very simple RESTful endpoint definition that returns *hello* to requests on `/hello`.
+
[source, java]
----
@Path("/hello")
public class GreetingResource {

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String hello() {
        return "Hello from Quarkus REST";
    }
}
----

+
[NOTE]
====
Compared to vanilla JAX-RS, with Quarkus there is no need to create an `Application` class. It's supported but not required. In addition, only one instance of the resource is created and not one per request. You can configure this using the different `Scoped` annotations (`ApplicationScoped`, `RequestScoped`, etc).
====

## Run the Application in Quarkus Dev Mode

Quarkus Dev Mode provides a powerful live coding experience. Any changes you make to your Java files or resource files will be automatically picked up and applied to the running application. This means you can see the effects of your changes immediately without having to restart the application.

. Open the `application.properties` in the `src/main/resources` directory and append the following configuration to the file. This config allows you to access the https://quarkus.io/guides/dev-ui[Dev UI^] from the cloud IDE since the Dev UI is designed for running your localhost.
+
[source, properties,role="copypaste",subs="attributes"]
----
%dev.quarkus.dev-ui.hosts=kube-admin-quarkus-workshop-index-webpage.{ROUTE_SUBDOMAIN}
----

. Open a new terminal windown on the VS Code.
+
image::new-terminal.png[commands, 600]

. Run the following `mvn` (Maven) commands to run Quarkus dev mode in the terminal.
+
[source, shell,role="copypaste"]
----
mvn clean quarkus:dev -Dquarkus.http.host=0.0.0.0 -Dquarkus.analytics.disabled=true
----

. When the dev mode starts, you will see a popup to access the *welcome* page.
+
image::cmd-livecoding.png[livecoding, 900]

. *Leave this terminal window open throughout the lab!* You will complete the entire lab without shutting down Quarkus Live Coding mode, so be careful not to close the tab (if you do, you re-run it). This is very useful for quick experimentation.
+
[NOTE]
====
The first time you build the app, new dependencies may be downloaded via maven. This should only happen once, after that things will go even faster
====

+
[NOTE]
====
You may see WARNINGs like `Unrecognized configuration key` or `Duplicate entry`. These are configuration values that will take effect later on and can be safely ignored for now.
Occasionally you may get an error (e.g. `NullPointerException`) during Live Reloading. In this case, simply close the terminal and restart live coding using the task.
====

. Note the amazingly fast startup time! The app is now running *locally* (within the VS Code container in which the workspace is also running). `localhost` refers to the Kubernetes pod, not *your* laptop (so therefore opening localhost:8080 in your browser will not do anything).

. In the Terminal, you can also see *Tests paused* by default when a Quarkus application gets started. We will learn more details in the _Testing Quarkus App_ lab.

. When you select *Open In New Tab* to access the welcome page, you should see the popup message below. 
+
image::open-external.png[port, 700]

. Select `Open`. A new tab in your web browser will open automatically.
+
image::welcome-quarkus.png[port, 900]

. Select `/hello` enpoint on the Quarkus welcome. You should see the following page:
+
image::crw-open-page-hello.png[page, 800]

. When you fail to access the *hello* endpoint URL, make sure if the new opened tab has the *http* protocol.

. You can also test the endpoint using the _curl_ command. Open a *new* terminal by selecting `+` icon:
+
image::cmd-terminal.png[livecoding, 900]

. Invoke the `hello` endpoint using the following _curl_ command:
+
[source,sh,role="copypaste"]
----
curl http://localhost:8080/hello
----

. The output should look like this:
+
[source,sh]
----
Hello from Quarkus REST
----
